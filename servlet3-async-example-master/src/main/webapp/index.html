<!doctype html>
<!--[if lt IE 7]> <html class="no-js ie6 oldie" lang="en"> <![endif]-->
<!--[if IE 7]>    <html class="no-js ie7 oldie" lang="en"> <![endif]-->
<!--[if IE 8]>    <html class="no-js ie8 oldie" lang="en"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en"> <!--<![endif]-->

<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <title>Servlet 3 Async Test</title>
  <meta name="description" content="Servlet 3 Async Test">
  <meta name="author" content="Fabiano Franz">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <link rel="stylesheet" href="css/style.css">
  <script src="js/libs/modernizr-2.0.6.min.js"></script>
</head>

<body>

  <div id="container">
    <header>
		<h1>Servlet 3 Async Example</h1>
		<p>
			Simple example for testing the new Servlet 3 annotations and asynchronous support.<br />
			<a href="https://github.com/fabianofranz/servlet3-async-example/" target="_blank">Fork on Github</a>.
		</p>
    </header>
    <div id="main" role="main">
		<div id="content">
			Starting the listener, wait...
		</div>
    </div>
    <footer>
    </footer>
  </div> <!--! end of #container -->
  <div id="badge">look ma, no web.xml!</div>


  <!-- JavaScript at the bottom for fast page loading -->

  <!-- Grab Google CDN's jQuery, with a protocol relative URL; fall back to local if offline -->
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.6.2/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="js/libs/jquery-1.6.2.min.js"><\/script>')</script>
  <script type="text/javascript" src="js/jquery.stream-1.2.min.js"></script>
  <script defer src="js/plugins.js"></script>
  <script type="text/javascript">
	
		$(document).ready(function() {
	
	           $.stream("./async", {
	                   type: "http",
	                   dataType: "text",
	                   context: $("#content")[0],
	                   open: function(event, stream) {
						$("<div />").html("open").appendTo(this);
						stream.send({});
	                   },
	                   message: function(event) {
						$("<div />").html("message: " + event.data).appendTo(this);
	                   },
	                   error: function() {
						$("<div />").html("error").appendTo(this);
	                   },
	                   close: function() {
						$("<div />").html("close").appendTo(this);
	                   }
	           });
	                   
		});
		
  </script>

	
  <!--[if lt IE 7 ]>
    <script src="//ajax.googleapis.com/ajax/libs/chrome-frame/1.0.3/CFInstall.min.js"></script>
    <script>window.attachEvent('onload',function(){CFInstall.check({mode:'overlay'})})</script>
  <![endif]-->
  
</body>
</html>
